/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N=Symbol("Comlink.proxy"),X=Symbol("Comlink.endpoint"),$=Symbol("Comlink.releaseProxy"),U=Symbol("Comlink.finalizer"),O=Symbol("Comlink.thrown"),D=e=>typeof e=="object"&&e!==null||typeof e=="function",J={canHandle:e=>D(e)&&e[N],serialize(e){const{port1:n,port2:t}=new MessageChannel;return z(e,n),[t,[t]]},deserialize(e){return e.start(),ee(e)}},K={canHandle:e=>D(e)&&O in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},V=new Map([["proxy",J],["throw",K]]);function Q(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function z(e,n=globalThis,t=["*"]){n.addEventListener("message",function r(o){if(!o||!o.data)return;if(!Q(t,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:b,type:a,path:s}=Object.assign({path:[]},o.data),_=(o.data.argumentList||[]).map(E);let i;try{const f=s.slice(0,-1).reduce((w,k)=>w[k],e),g=s.reduce((w,k)=>w[k],e);switch(a){case"GET":i=g;break;case"SET":f[s.slice(-1)[0]]=E(o.data.value),i=!0;break;case"APPLY":i=g.apply(f,_);break;case"CONSTRUCT":{const w=new g(..._);i=ae(w)}break;case"ENDPOINT":{const{port1:w,port2:k}=new MessageChannel;z(e,k),i=oe(w,[w])}break;case"RELEASE":i=void 0;break;default:return}}catch(f){i={value:f,[O]:0}}Promise.resolve(i).catch(f=>({value:f,[O]:0})).then(f=>{const[g,w]=W(f);n.postMessage(Object.assign(Object.assign({},g),{id:b}),w),a==="RELEASE"&&(n.removeEventListener("message",r),H(n),U in e&&typeof e[U]=="function"&&e[U]())}).catch(f=>{const[g,w]=W({value:new TypeError("Unserializable return value"),[O]:0});n.postMessage(Object.assign(Object.assign({},g),{id:b}),w)})}),n.start&&n.start()}function Z(e){return e.constructor.name==="MessagePort"}function H(e){Z(e)&&e.close()}function ee(e,n){return I(e,[],n)}function M(e){if(e)throw new Error("Proxy has been released and is not useable")}function q(e){return x(e,{type:"RELEASE"}).then(()=>{H(e)})}const L=new WeakMap,P="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(L.get(e)||0)-1;L.set(e,n),n===0&&q(e)});function ne(e,n){const t=(L.get(n)||0)+1;L.set(n,t),P&&P.register(e,n,e)}function te(e){P&&P.unregister(e)}function I(e,n=[],t=function(){}){let r=!1;const o=new Proxy(t,{get(b,a){if(M(r),a===$)return()=>{te(o),q(e),r=!0};if(a==="then"){if(n.length===0)return{then:()=>o};const s=x(e,{type:"GET",path:n.map(_=>_.toString())}).then(E);return s.then.bind(s)}return I(e,[...n,a])},set(b,a,s){M(r);const[_,i]=W(s);return x(e,{type:"SET",path:[...n,a].map(f=>f.toString()),value:_},i).then(E)},apply(b,a,s){M(r);const _=n[n.length-1];if(_===X)return x(e,{type:"ENDPOINT"}).then(E);if(_==="bind")return I(e,n.slice(0,-1));const[i,f]=F(s);return x(e,{type:"APPLY",path:n.map(g=>g.toString()),argumentList:i},f).then(E)},construct(b,a){M(r);const[s,_]=F(a);return x(e,{type:"CONSTRUCT",path:n.map(i=>i.toString()),argumentList:s},_).then(E)}});return ne(o,e),o}function re(e){return Array.prototype.concat.apply([],e)}function F(e){const n=e.map(W);return[n.map(t=>t[0]),re(n.map(t=>t[1]))]}const G=new WeakMap;function oe(e,n){return G.set(e,n),e}function ae(e){return Object.assign(e,{[N]:!0})}function W(e){for(const[n,t]of V)if(t.canHandle(e)){const[r,o]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},o]}return[{type:"RAW",value:e},G.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return V.get(e.name).deserialize(e.value);case"RAW":return e.value}}function x(e,n,t){return new Promise(r=>{const o=se();e.addEventListener("message",function b(a){!a.data||!a.data.id||a.data.id!==o||(e.removeEventListener("message",b),r(a.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),t)})}function se(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let c;const B=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&B.decode();let T=null;function S(){return(T===null||T.byteLength===0)&&(T=new Uint8Array(c.memory.buffer)),T}function m(e,n){return e=e>>>0,B.decode(S().subarray(e,e+n))}const p=new Array(128).fill(void 0);p.push(void 0,null,!0,!1);let R=p.length;function l(e){R===p.length&&p.push(p.length+1);const n=R;return R=p[n],p[n]=e,n}function u(e){return p[e]}function ie(e){e<132||(p[e]=R,R=e)}function v(e){const n=u(e);return ie(e),n}let h=0;function ce(e,n){const t=n(e.length*1,1)>>>0;return S().set(e,t/1),h=e.length,t}let A=null;function d(){return(A===null||A.byteLength===0)&&(A=new Int32Array(c.memory.buffer)),A}function _e(e,n){let t,r;try{const f=c.__wbindgen_add_to_stack_pointer(-16),g=ce(e,c.__wbindgen_malloc),w=h;c.wasm_discover_alphappp_petri_net_from_xes_vec(f,g,w,n);var o=d()[f/4+0],b=d()[f/4+1],a=d()[f/4+2],s=d()[f/4+3],_=o,i=b;if(s)throw _=0,i=0,v(a);return t=_,r=i,m(_,i)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,r,1)}}const C=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ue=typeof C.encodeInto=="function"?function(e,n){return C.encodeInto(e,n)}:function(e,n){const t=C.encode(e);return n.set(t),{read:e.length,written:t.length}};function j(e,n,t){if(t===void 0){const s=C.encode(e),_=n(s.length,1)>>>0;return S().subarray(_,_+s.length).set(s),h=s.length,_}let r=e.length,o=n(r,1)>>>0;const b=S();let a=0;for(;a<r;a++){const s=e.charCodeAt(a);if(s>127)break;b[o+a]=s}if(a!==r){a!==0&&(e=e.slice(a)),o=t(o,r,r=a+e.length*3,1)>>>0;const s=S().subarray(o+a,o+r),_=ue(e,s);a+=_.written,o=t(o,r,a,1)>>>0}return h=a,o}function fe(e){let n,t;try{const i=c.__wbindgen_add_to_stack_pointer(-16),f=j(e,c.__wbindgen_malloc,c.__wbindgen_realloc),g=h;c.wasm_petri_net_dot(i,f,g);var r=d()[i/4+0],o=d()[i/4+1],b=d()[i/4+2],a=d()[i/4+3],s=r,_=o;if(a)throw s=0,_=0,v(b);return n=s,t=_,m(s,_)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(n,t,1)}}function le(e){let n,t;try{const i=c.__wbindgen_add_to_stack_pointer(-16),f=j(e,c.__wbindgen_malloc,c.__wbindgen_realloc),g=h;c.wasm_import_pnml(i,f,g);var r=d()[i/4+0],o=d()[i/4+1],b=d()[i/4+2],a=d()[i/4+3],s=r,_=o;if(a)throw s=0,_=0,v(b);return n=s,t=_,m(s,_)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(n,t,1)}}function be(e){let n,t;try{const i=c.__wbindgen_add_to_stack_pointer(-16),f=j(e,c.__wbindgen_malloc,c.__wbindgen_realloc),g=h;c.wasm_export_pnml(i,f,g);var r=d()[i/4+0],o=d()[i/4+1],b=d()[i/4+2],a=d()[i/4+3],s=r,_=o;if(a)throw s=0,_=0,v(b);return n=s,t=_,m(s,_)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(n,t,1)}}function y(e,n){try{return e.apply(this,n)}catch(t){c.__wbindgen_exn_store(l(t))}}async function de(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function ge(){const e={};return e.wbg={},e.wbg.__wbg_log_73dc3b193109f071=function(n,t){console.log(m(n,t))},e.wbg.__wbindgen_string_new=function(n,t){const r=m(n,t);return l(r)},e.wbg.__wbg_time_2c9ba8df2c0b364e=function(n,t){console.time(m(n,t))},e.wbg.__wbg_crypto_1d1f22824a6a080c=function(n){const t=u(n).crypto;return l(t)},e.wbg.__wbindgen_is_object=function(n){const t=u(n);return typeof t=="object"&&t!==null},e.wbg.__wbg_process_4a72847cc503995b=function(n){const t=u(n).process;return l(t)},e.wbg.__wbg_versions_f686565e586dd935=function(n){const t=u(n).versions;return l(t)},e.wbg.__wbg_node_104a2ff8d6ea03a2=function(n){const t=u(n).node;return l(t)},e.wbg.__wbindgen_is_string=function(n){return typeof u(n)=="string"},e.wbg.__wbindgen_object_drop_ref=function(n){v(n)},e.wbg.__wbg_msCrypto_eb05e62b530a1508=function(n){const t=u(n).msCrypto;return l(t)},e.wbg.__wbg_require_cca90b1a94a0255b=function(){return y(function(){const n=module.require;return l(n)},arguments)},e.wbg.__wbindgen_is_function=function(n){return typeof u(n)=="function"},e.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return y(function(n,t){u(n).randomFillSync(v(t))},arguments)},e.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return y(function(n,t){u(n).getRandomValues(u(t))},arguments)},e.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(n,t){const r=new Function(m(n,t));return l(r)},e.wbg.__wbg_call_27c0f87801dedf93=function(){return y(function(n,t){const r=u(n).call(u(t));return l(r)},arguments)},e.wbg.__wbindgen_object_clone_ref=function(n){const t=u(n);return l(t)},e.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return y(function(){const n=self.self;return l(n)},arguments)},e.wbg.__wbg_window_c6fb939a7f436783=function(){return y(function(){const n=window.window;return l(n)},arguments)},e.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return y(function(){const n=globalThis.globalThis;return l(n)},arguments)},e.wbg.__wbg_global_207b558942527489=function(){return y(function(){const n=global.global;return l(n)},arguments)},e.wbg.__wbindgen_is_undefined=function(n){return u(n)===void 0},e.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return y(function(n,t,r){const o=u(n).call(u(t),u(r));return l(o)},arguments)},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(n){const t=u(n).buffer;return l(t)},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(n,t,r){const o=new Uint8Array(u(n),t>>>0,r>>>0);return l(o)},e.wbg.__wbg_new_63b92bc8671ed464=function(n){const t=new Uint8Array(u(n));return l(t)},e.wbg.__wbg_set_a47bac70306a19a7=function(n,t,r){u(n).set(u(t),r>>>0)},e.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(n){const t=new Uint8Array(n>>>0);return l(t)},e.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(n,t,r){const o=u(n).subarray(t>>>0,r>>>0);return l(o)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const n=new Error;return l(n)},e.wbg.__wbg_stack_658279fe44541cf6=function(n,t){const r=u(t).stack,o=j(r,c.__wbindgen_malloc,c.__wbindgen_realloc),b=h;d()[n/4+1]=b,d()[n/4+0]=o},e.wbg.__wbg_error_f851667af71bcfc6=function(n,t){let r,o;try{r=n,o=t,console.error(m(n,t))}finally{c.__wbindgen_free(r,o,1)}},e.wbg.__wbindgen_throw=function(n,t){throw new Error(m(n,t))},e.wbg.__wbindgen_memory=function(){const n=c.memory;return l(n)},e}function we(e,n){return c=e.exports,Y.__wbindgen_wasm_module=n,A=null,T=null,c}async function Y(e){if(c!==void 0)return c;typeof e>"u"&&(e=new URL("/assets/worker/petri_net_wasm_bg-CrLwOTOC.wasm",import.meta.url));const n=ge();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await de(await e,n);return we(t,r)}const me=async(e,n)=>_e(e,n);z({discover_petri_net_from_xes:me,petri_net_to_dot:async e=>fe(e),import_pnml:async e=>le(e),export_pnml:async e=>be(e),init:async()=>{await Y()}});
